<mvc:View controllerName="cs.stock.controller.Product.Add" 
    xmlns:l="sap.ui.layout" 
    xmlns:f="sap.ui.layout.form" 
    xmlns:mvc="sap.ui.core.mvc" 
    xmlns:core="sap.ui.core" 
    xmlns="sap.m">
    <Page id="page" showHeader="true" title="Agregar Artículo" showNavButton="true" navButtonPress="onBack">
        <VBox class="sapUiSmallMargin">
            <f:SimpleForm id="addProductForm" editable="true" layout="ResponsiveGridLayout" title="Información Básica" labelSpanXL="4" labelSpanL="3" labelSpanM="4" labelSpanS="12" adjustLabelSpan="false" emptySpanXL="0" emptySpanL="4" emptySpanM="0" emptySpanS="0" columnsXL="2" columnsL="1" columnsM="1" singleContainerFullSize="false">
                <f:content>
                    <core:Title text="Artículo" />
                    <Label text="Código" required="true" />
                    <Input id="codigo" valueStateText="El artículo debe tener un código."
                        valueLiveUpdate="true"
                        value="{ 
                            path: '/codigo',
                            type: 'sap.ui.model.type.String',
                            constraints: {
                                minLength: 1,
                                maxLength: 256
                                }
                            }"/>
                    <Label text="Descripción" required="true" />
                    <Input id="descripcion" 
                        valueStateText="El artículo debe tener una descripción"
                        valueLiveUpdate="true"
                        value="{ 
                            path: '/descripcion',
                            type: 'sap.ui.model.type.String',
                                constraints: {
                                    minLength: 1
                                    }                        
                            }"/>
                    <Label text="IVA" />
                    <Select forceSelection="false" selectedKey="{/iva_tipo}">
                        <core:Item key="G" text="Gravado" />
                        <core:Item key="E" text="Exento" />
                    </Select>
                    <Input id="iva_valor" placeholder="Valor..." value="{/iva_valor}" description="%"/>
                    <Label text="Costo"/>
                    <Input id="costo" value="{/costo}"/>
                    <Label text="Coeficiente de ganancia 1"/>
                    <Input id="coeficiente_ganancia_1" value="{/coeficiente_ganancia_1}" />
                    <Text text="Precio Minorista: {= (${/costo} * ${/coeficiente_ganancia_1}).toFixed(2)}"/>
                    <Label text="Coeficiente de ganancia 2"/>
                    <Input id="coeficiente_ganancia_2" value="{/coeficiente_ganancia_2}" />
                    <Text text="Precio Mayorista: {= (${/costo} * ${/coeficiente_ganancia_2}).toFixed(2)}"/>
                    <Label text="Stock actual"/>
                    <Input id="stock_actual" value="{/stock_actual}" />
                    <Label text="Marca / Categoría"/>
                        <Input id="id_marca" type="Text" submit="handleSuggest" liveChange="searchMarcaSuggest" valueLiveUpdate="true" selectedKey="{/id_marca}" placeholder="Ingrese una marca..." showSuggestion="true" suggestionItems="{marcas>/}">
                            <suggestionItems>
                                <core:Item text="{marcas>marca}" key="{marcas>id_marca}" />
                            </suggestionItems>
                        </Input>
                        <Input id="id_categoria" type="Text" selectedKey="{/id_categoria}" placeholder="Ingrese una categoria..." showSuggestion="true" suggestionItems="{categorias>/}">
                            <suggestionItems>
                                <core:Item text="{categorias>categoria}" key="{categorias>id_categoria}" />
                            </suggestionItems>
                        </Input>
                    </f:content>
                </f:SimpleForm>
            </VBox>
            <footer>
                <Bar>
                    <contentRight>
                        <Button id="save" text="Save" type="Emphasized" press="handleSavePress" />
                        <Button id="cancel" text="Cancel" visible="false" press="handleCancelPress" />
                    </contentRight>
                </Bar>
            </footer>
        </Page>
    </mvc:View>